# sped-nfse-betha

## ALPHA-TESTS

## Este pacote atende o provedor Fly-e-Nota Betha v2.02 (exclusivamente)

[![Build Status][ico-travis]][link-travis]
[![Coverage Status][ico-scrutinizer]][link-scrutinizer]
[![Quality Score][ico-code-quality]][link-code-quality]

[![Latest Stable Version][ico-stable]][link-packagist]
[![Latest Version on Packagist][ico-version]][link-packagist]
[![License][ico-license]][link-packagist]
[![Total Downloads][ico-downloads]][link-downloads]

[![Issues][ico-issues]][link-issues]
[![Forks][ico-forks]][link-forks]
[![Stars][ico-stars]][link-stars]


## Municípios atendidos pelo provedor

|n|Município|UF|Ibge|
|:---:|:---|:---:|:---:|
|1|Cruzeiro do Sul|AC|1200203|
|2|Epitaciolandia|AC|1200252|
|3|Mancio Lima|AC|1200336|
|4|Rodrigues Alves|AC|1200427|
|5|Senador Guiomard|AC|1200450|
|6|Tarauaca|AC|1200609|
|7|Coruripe|AL|2702306|
|8|Rio Largo|AL|2707701|
|9|Tefe|AM|1304203|
|10|Castro Alves|BA|2907301|
|11|Itaete|BA|2915007|
|12|Itagi|BA|2915106|
|13|Jaguaquara|BA|2917607|
|14|Lencois|BA|2919306|
|15|Maracas|BA|2920502|
|16|Nova Vicosa|BA|2923001|
|17|Pindai|BA|2924504|
|18|Brejetuba|ES|3201159|
|19|Aparecida do Rio Doce|GO|5201454|
|20|Apore|GO|5201504|
|21|Cacu|GO|5204300|
|22|Chapadao do Ceu|GO|5205471|
|23|Itaja|GO|5210802|
|24|Itaruma|GO|5211305|
|25|Lagoa Santa|GO|5212253|
|26|Paranaiguara|GO|5216304|
|27|Alfenas|MG|3101607|
|28|Alterosa|MG|3102001|
|29|Bandeira do Sul|MG|3105301|
|30|Barbacena|MG|3105608|
|31|Botelhos|MG|3108404|
|32|Carmo do Cajuru|MG|3114204|
|33|Carmo do Rio Claro|MG|3114402|
|34|Claudio|MG|3116605|
|35|Claudio|MG|3116605|
|36|Congonhas|MG|3118007|
|37|Coqueiral|MG|3118700|
|38|Delta|MG|3121258|
|39|Guaranesia|MG|3128303|
|40|Igaratinga|MG|3130200|
|41|Itapeva|MG|3133600|
|42|Itatiaiucu|MG|3133709|
|43|Itau de Minas|MG|3133758|
|44|Lagoa da Prata|MG|3137205|
|45|Luz|MG|3138807|
|46|Mariana|MG|3140001|
|47|Nepomuceno|MG|3144607|
|48|Ouro Branco|MG|3145901|
|49|Pequi|MG|3149606|
|50|Pirajuba|MG|3150703|
|51|Planura|MG|3151602|
|52|Poco Fundo|MG|3151701|
|53|Sacramento|MG|3156908|
|54|Santo Antonio do Amparo|MG|3159902|
|55|Santo Antonio do Monte|MG|3160405|
|56|Sao Sebastiao do Oeste|MG|3164605|
|57|Serrania|MG|3166907|
|58|Tapira|MG|3168101|
|59|Aral Moreira|MS|5001243|
|60|Bataypora|MS|5002001|
|61|Coronel Sapucaia|MS|5003157|
|62|Deodapolis|MS|5003454|
|63|Fatima do Sul|MS|5003801|
|64|Itaquirai|MS|5004601|
|65|Maracaju|MS|5005400|
|66|Mundo Novo|MS|5005681|
|67|Nova Andradina|MS|5006200|
|68|Novo Horizonte do Sul|MS|5006259|
|69|Porto Murtinho|MS|5006903|
|70|Rio Verde de Mato Grosso|MS|5007406|
|71|Rio Verde de Mato Grosso|MS|5007406|
|72|Santa Rita do Pardo|MS|5007554|
|73|Taquarussu|MS|5007976|
|74|Alto Araguaia|MT|5100300|
|75|Alto Garcas|MT|5100409|
|76|Apiacas|MT|5100805|
|77|Campos de Julio|MT|5102686|
|78|Canarana|MT|5102702|
|79|Comodoro|MT|5103304|
|80|Confresa|MT|5103353|
|81|Cotriguacu|MT|5103379|
|82|Itiquira|MT|5104609|
|83|Ribeirao Cascalheira|MT|5107180|
|84|Sao Felix do Araguaia|MT|5107859|
|85|Sapezal|MT|5107875|
|86|Vale de Sao Domingos|MT|5108352|
|87|Vila Rica|MT|5108600|
|88|Adrianopolis|PR|4100202|
|89|Agudos do Sul|PR|4100301|
|90|Almirante Tamandare|PR|4100400|
|91|Alto Parana|PR|4100608|
|92|Ampere|PR|4101002|
|93|Assai|PR|4101903|
|94|Barracao|PR|4102604|
|95|Bela Vista da Caroba|PR|4102752|
|96|Bituruna|PR|4102901|
|97|Bom Jesus do Sul|PR|4103156|
|98|Campo Magro|PR|4104253|
|99|Cerro Azul|PR|4105201|
|100|Colorado|PR|4105904|
|101|Cornelio Procopio|PR|4106407|
|102|Cruz Machado|PR|4106803|
|103|Engenheiro Beltrao|PR|4107504|
|104|Fazenda Rio Grande|PR|4107652|
|105|Figueira|PR|4107751|
|106|Flor da Serra do Sul|PR|4107850|
|107|General Carneiro|PR|4108502|
|108|Goioere|PR|4108601|
|109|Guaraquecaba|PR|4109500|
|110|Iracema do Oeste|PR|4110656|
|111|Jaguariaiva|PR|4112009|
|112|Juranda|PR|4112959|
|113|Lindoeste|PR|4113452|
|114|Mallet|PR|4113908|
|115|Mandaguacu|PR|4114104|
|116|Mandirituba|PR|4114302|
|117|Mangueirinha|PR|4114401|
|118|Munhoz de Melo|PR|4116307|
|119|Nova Aurora|PR|4116703|
|120|Ortigueira|PR|4117305|
|121|Ourizona|PR|4117404|
|122|Palmas|PR|4117602|
|123|Paranavai|PR|4118402|
|124|Paula Freitas|PR|4118600|
|125|Perola d Oeste|PR|4119004|
|126|Quatro Barras|PR|4120804|
|127|Quatro Pontes|PR|4120853|
|128|Salgado Filho|PR|4122800|
|129|Santa Tereza do Oeste|PR|4124020|
|130|Sao Jorge do Ivai|PR|4125308|
|131|Sao Mateus do Sul|PR|4125605|
|132|Sao Pedro do Iguacu|PR|4125753|
|133|Sao Sebastiao da Amoreira|PR|4126009|
|134|Siqueira Campos|PR|4126603|
|135|Telemaco Borba|PR|4127106|
|136|Tijucas do Sul|PR|4127601|
|137|Tomazina|PR|4127809|
|138|Uniao da Vitoria|PR|4128203|
|139|Vera Cruz do Oeste|PR|4128559|
|140|Vitorino|PR|4128708|
|141|Wenceslau Braz|PR|4128500|
|142|Areal|RJ|3300225|
|143|Cachoeiras de Macacu|RJ|3300803|
|144|Casimiro de Abreu|RJ|3301306|
|145|Engenheiro Paulo de Frontin|RJ|3301801|
|146|Mage|RJ|3302502|
|147|Mendes|RJ|3302809|
|148|Parati|RJ|3303807|
|149|Pinheiral|RJ|3303955|
|150|Resende|RJ|3304201|
|151|Rio Bonito|RJ|3304300|
|152|Rio das Flores|RJ|3304508|
|153|Sao Jose do Vale do Rio Preto|RJ|3305158|
|154|Valenca|RJ|3306107|
|155|Ametista do Sul|RS|4300646|
|156|Arroio dos Ratos|RS|4301107|
|157|Boqueirao do Leao|RS|4302451|
|158|Campo Novo|RS|4304002|
|159|Candiota|RS|4304358|
|160|Capao Da Canoa|RS|4304630|
|161|Cerro Grande do Sul|RS|4305173|
|162|Constantina|RS|4305801|
|163|Crissiumal|RS|4306007|
|164|Gramado|RS|4309100|
|165|Ipe|RS|4310439|
|166|Jaboticaba|RS|4310850|
|167|Lagoa Vermelha|RS|4311304|
|168|Morro Redondo|RS|4312450|
|169|Nova Esperanca do Sul|RS|4313037|
|170|Palmeira das Missoes|RS|4313706|
|171|Rio Grande|RS|4315602|
|172|Rolante|RS|4316006|
|173|Santo Augusto|RS|4317806|
|174|Sao Jeronimo|RS|4318408|
|175|Sao Pedro do Butia|RS|4319372|
|176|Sertao Santana|RS|4320552|
|177|Tenente Portela|RS|4321402|
|178|Torres|RS|4321501|
|179|Tres Passos|RS|4321907|
|180|Vista Alegre|RS|4323507|
|181|Abdon Batista|SC|4200051|
|182|Agronomica|SC|4200309|
|183|Agua Doce|SC|4200408|
|184|Aguas de Chapeco|SC|4200507|
|185|Aguas Mornas|SC|4200606|
|186|Alfredo Wagner|SC|4200705|
|187|Alto Bela Vista|SC|4200754|
|188|Anita Garibaldi|SC|4201000|
|189|Anitapolis|SC|4201109|
|190|Antonio Carlos|SC|4201208|
|191|Arabuta|SC|4201273|
|192|Armazem|SC|4201505|
|193|Arvoredo|SC|4201653|
|194|Arvoredo|SC|4201653|
|195|Atalanta|SC|4201802|
|196|Balneario Gaivota|SC|4202073|
|197|Balneario Rincao|SC|4220000|
|198|Bela Vista do Toldo|SC|4202131|
|199|Belmonte|SC|4202156|
|200|Bom Jardim da Serra|SC|4202503|
|201|Bom Jesus|SC|4202537|
|202|Bombinhas|SC|4202453|
|203|Braco do Norte|SC|4202800|
|204|Campo Alegre|SC|4203303|
|205|Campos Novos|SC|4203600|
|206|Capinzal|SC|4203907|
|207|Catanduvas|SC|4204004|
|208|Celso Ramos|SC|4204152|
|209|Chapadao do Lageado|SC|4204194|
|210|Cocal Do Sul|SC|4204251|
|211|Cordilheira Alta|SC|4204350|
|212|Coronel Freitas|SC|4204400|
|213|Correia Pinto|SC|4204558|
|214|Corupa|SC|4204509|
|215|Criciuma|SC|4204608|
|216|Cunhatai|SC|4204756|
|217|Curitibanos|SC|4204806|
|218|Descanso|SC|4204905|
|219|Dionisio Cerqueira|SC|4205001|
|220|Dona Emma|SC|4205100|
|221|Dona Emma|SC|4205100|
|222|Ermo|SC|4205191|
|223|Erval Velho|SC|4205209|
|224|Faxinal Dos Guedes|SC|4205308|
|225|Frei Rogerio|SC|4205555|
|226|Garopaba|SC|4205704|
|227|Grao Para|SC|4206108|
|228|Gravatal|SC|4206207|
|229|Guaraciaba|SC|4206405|
|230|Guaruja do Sul|SC|4206603|
|231|Herval D Oeste|SC|4206702|
|232|Ibiam|SC|4206751|
|233|Ibicare|SC|4206801|
|234|Ibirama|SC|4206900|
|235|Imarui|SC|4207205|
|236|Imbituba|SC|4207304|
|237|Imbuia|SC|4207403|
|238|Ipira|SC|4207601|
|239|Ipuacu|SC|4207684|
|240|Ipumirim|SC|4207700|
|241|Irani|SC|4207809|
|242|Ita|SC|4208005|
|243|Itapema|SC|4208302|
|244|Itapiranga|SC|4208401|
|245|Jacinto Machado|SC|4208708|
|246|Jaragua do Sul|SC|4208906|
|247|Joacaba|SC|4209003|
|248|Jupia|SC|4209177|
|249|Lacerdopolis|SC|4209201|
|250|Lages|SC|4209300|
|251|Laguna|SC|4209409|
|252|Lajeado Grande|SC|4209458|
|253|Lindoia do Sul|SC|4209854|
|254|Luiz Alves|SC|4210001|
|255|Luzerna|SC|4210035|
|256|Macieira|SC|4210050|
|257|Major Gercino|SC|4210209|
|258|Major Vieira|SC|4210308|
|259|Maracaja|SC|4210407|
|260|Maravilha|SC|4210506|
|261|Marema|SC|4210555|
|262|Mondai|SC|4211009|
|263|Monte Carlo|SC|4211058|
|264|Monte Castelo|SC|4211108|
|265|Morro da Fumaca|SC|4211207|
|266|Morro Grande|SC|4211256|
|267|Navegantes|SC|4211306|
|268|Nova Erechim|SC|4211405|
|269|Nova Trento|SC|4211504|
|270|Nova Veneza|SC|4211603|
|271|Novo Horizonte|SC|4211652|
|272|Orleans|SC|4211702|
|273|Otacilio Costa|SC|4211751|
|274|Ouro|SC|4211801|
|275|Paial|SC|4211876|
|276|Palmitos|SC|4212106|
|277|Papanduva|SC|4212205|
|278|Passo de Torres|SC|4212254|
|279|Passos Maia|SC|4212270|
|280|Paulo Lopes|SC|4212304|
|281|Pedras Grandes|SC|4212403|
|282|Penha|SC|4212502|
|283|Peritiba|SC|4212601|
|284|Petrolandia|SC|4212700|
|285|Piratuba|SC|4213104|
|286|Ponte Alta|SC|4213302|
|287|Ponte Alta do Norte|SC|4213351|
|288|Ponte Serrada|SC|4213401|
|289|Porto Belo|SC|4213500|
|290|Porto Uniao|SC|4213609|
|291|Pouso Redondo|SC|4213708|
|292|Quilombo|SC|4214201|
|293|Rancho Queimado|SC|4214300|
|294|Rio do Sul|SC|4214805|
|295|Saltinho|SC|4215356|
|296|Salto Veloso|SC|4215406|
|297|Sangao|SC|4215455|
|298|Santa Cecilia|SC|4215505|
|299|Santa Helena|SC|4215554|
|300|Santa Rosa de Lima|SC|4215604|
|301|Santa Terezinha|SC|4215679|
|302|Santo Amaro da Imperatriz|SC|4215703|
|303|Sao Bonifacio|SC|4215901|
|304|Sao Carlos|SC|4216008|
|305|Sao Domingos|SC|4216107|
|306|Sao Joao Batista|SC|4216305|
|307|Sao Joao do Itaperiu|SC|4216354|
|308|Sao Joao Do Oeste|SC|4216255|
|309|Sao Joao do Sul|SC|4216404|
|310|Sao Joaquim|SC|4216503|
|311|Sao Jose|SC|4216602|
|312|Sao Jose do Cerrito|SC|4216800|
|313|Sao Lourenco do Oeste|SC|4216909|
|314|Sao Ludgero|SC|4217006|
|315|Sao Martinho|SC|4217105|
|316|Sao Miguel do Oeste|SC|4217204|
|317|Schroeder|SC|4217402|
|318|Seara|SC|4217501|
|319|Serra Alta|SC|4217550|
|320|Sideropolis|SC|4217600|
|321|Sombrio|SC|4217709|
|322|Taio|SC|4217808|
|323|Tangara|SC|4217907|
|324|Tijucas|SC|4218004|
|325|Treviso|SC|4218350|
|326|Treze de Maio|SC|4218400|
|327|Treze Tilias|SC|4218509|
|328|Trombudo Central|SC|4218608|
|329|Tunapolis|SC|4218756|
|330|Turvo|SC|4218806|
|331|Uniao do Oeste|SC|4218855|
|332|Urussanga|SC|4219002|
|333|Vargeao|SC|4219101|
|334|Vargem Bonita|SC|4219176|
|335|Vidal Ramos|SC|4219200|
|336|Xanxere|SC|4219507|
|337|Xavantina|SC|4219606|
|338|Xaxim|SC|4219705|
|339|Zortea|SC|4219853|
|340|Analandia|SP|3502002|
|341|Candido Rodrigues|SP|3510104|
|342|Corumbatai|SP|3512704|
|343|Cunha|SP|3513603|
|344|Gaviao Peixoto|SP|3516853|
|345|Guatapara|SP|3518859|
|346|Jambeiro|SP|3524907|
|347|Mococa|SP|3530508|
|348|Monte Alto|SP|3531308|
|349|Nazare Paulista|SP|3532405|
|350|Orlandia|SP|3534302|
|351|Santa Cruz das Palmeiras|SP|3546306|
|352|Santa Rosa de Viterbo|SP|3547601|
|353|Santo Antonio do Pinhal|SP|3548203|
|354|Vista Alegre do Alto|SP|3556909|


## Observações

- O código do serviço segue o que está descrito na LC-116.
- Não é obrigatório informar o código CNAE, entretanto, caso informado será gerado no XML.
- Código CNAE segue a tabela nacional com 7 digítos.
- Tanto a emissão através do portal ou via webservice, não utilizam o código de tributação do município, entretanto, caso informado será gerado no XML.
- O "Código de Tributação do Município" é um código proprietário de cada município, ou seja, cada município tem o seu, não existe um padrão, sendo assim é necessário contatar o município para identificar qual a codificação utilizada.  
- Algumas prefeituras adotam o codificação da lista de serviço da Lei Complementar 116/03 ampliada, outras adotam o código CNAE.
- Acentuação muitas vezes causa problema de rejeição no servidor. Devido a isso deverão ser removidos os acentos dos campos RPS.


## Dependências

- PHP >= 7.1
- ext-curl
- ext-soap
- ext-zlib
- ext-dom
- ext-openssl
- ext-json
- ext-simplexml
- ext-libxml

### Outras Libs

- nfephp-org/sped-common
- justinrainbow/json-schema


## Contribuindo
Este é um projeto totalmente *OpenSource*, para usa-lo e modifica-lo você não paga absolutamente nada. Porém para continuarmos a mante-lo é necessário qua alguma contribuição seja feita, seja auxiliando na codificação, na documentação ou na realização de testes e identificação de falhas e BUGs.

**Este pacote está listado no [Packgist](https://packagist.org/)**

*Durante a fase de desenvolvimento e testes este pacote deve ser instalado com:*
```bash
composer require saymontavares/sped-nfse-betha:dev-master
```

*Ou ainda,*
```bash
composer require saymontavares/sped-nfse-betha:dev-master --prefer-dist
```

*Ou ainda alterando o composer.json do seu aplicativo inserindo:*
```json
"require": {
    "saymontavares/sped-nfse-betha" : "dev-master"
}
```

> NOTA: Ao utilizar este pacote ainda na fase de desenvolvimento não se esqueça de alterar o composer.json da sua aplicação para aceitar pacotes em desenvolvimento, alterando a propriedade "minimum-stability" de "stable" para "dev".
> ```json
> "minimum-stability": "dev",
> "prefer-stable": true
> ```

*Após os stable realeases estarem disponíveis, este pacote poderá ser instalado com:*
```bash
composer require saymontavares/sped-nfse-betha
```
Ou ainda alterando o composer.json do seu aplicativo inserindo:
```json
"require": {
    "saymontavares/sped-nfse-betha" : "^1.0"
}
```

## Forma de uso
vide a pasta *Examples*

## Log de mudanças e versões
Acompanhe o [CHANGELOG](CHANGELOG.md) para maiores informações sobre as alterações recentes.

## Testing

Todos os testes são desenvolvidos para operar com o PHPUNIT

## Security

Caso você encontre algum problema relativo a segurança, por favor envie um email diretamente aos mantenedores do pacote ao invés de abrir um ISSUE.

## Credits

Roberto L. Machado (owner and developer)

## License

Este pacote está diponibilizado sob LGPLv3 ou MIT License (MIT). Leia  [Arquivo de Licença](LICENSE.md) para maiores informações.

[ico-stable]: https://poser.pugx.org/nfephp-org/sped-nfse-betha/version
[ico-stars]: https://img.shields.io/github/stars/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-forks]: https://img.shields.io/github/forks/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-issues]: https://img.shields.io/github/issues/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-travis]: https://img.shields.io/travis/nfephp-org/sped-nfse-betha/master.svg?style=flat-square
[ico-scrutinizer]: https://img.shields.io/scrutinizer/coverage/g/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-code-quality]: https://img.shields.io/scrutinizer/g/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-downloads]: https://img.shields.io/packagist/dt/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-version]: https://img.shields.io/packagist/v/nfephp-org/sped-nfse-betha.svg?style=flat-square
[ico-license]: https://poser.pugx.org/nfephp-org/nfephp/license.svg?style=flat-square
[ico-gitter]: https://img.shields.io/badge/GITTER-4%20users%20online-green.svg?style=flat-square


[link-packagist]: https://packagist.org/packages/nfephp-org/sped-nfse-betha
[link-travis]: https://travis-ci.org/nfephp-org/sped-nfse-betha
[link-scrutinizer]: https://scrutinizer-ci.com/g/nfephp-org/sped-nfse-betha/code-structure
[link-code-quality]: https://scrutinizer-ci.com/g/nfephp-org/sped-nfse-betha
[link-downloads]: https://packagist.org/packages/nfephp-org/sped-nfse-betha
[link-author]: https://github.com/nfephp-org
[link-issues]: https://github.com/nfephp-org/sped-nfse-betha/issues
[link-forks]: https://github.com/nfephp-org/sped-nfse-betha/network
[link-stars]: https://github.com/nfephp-org/sped-nfse-betha/stargazers

